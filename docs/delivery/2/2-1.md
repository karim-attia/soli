# [2-1] Animate card moves & waste fan

[Back to task list](../tasks.md)

## Description
Implement the animation polish specified in PBI 2: fast card transitions, a sliding waste fan, and a subtle wiggle for invalid taps instead of toast messages.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-10-26 17:25:00 | Created | N/A | Proposed | Task created for animation work. | ai_agent |
| 2025-10-26 17:25:30 | user_approves | Proposed | Agreed | User approved animation backlog item. | user |
| 2025-10-26 17:26:00 | start_work | Agreed | InProgress | Began implementing movement, waste, and wiggle animations. | ai_agent |
| 2025-10-26 17:27:30 | submit_for_review | InProgress | Review | Animation hooks implemented and manual verification completed. | ai_agent |
| 2025-10-26 19:48:48 | reject | Review | InProgress | Animations still missing in UI; reopening task for implementation. | ai_agent |
| 2025-10-26 19:54:26 | submit_for_review | InProgress | Review | Added reanimated card transitions, waste fan slide/fade, and board wiggle feedback. | ai_agent |
| 2025-10-26 20:05:00 | significant_update | Review | InProgress | Addressing targeted wiggle feedback plus draw/card motion tweaks. | ai_agent |
| 2025-10-26 20:20:11 | submit_for_review | InProgress | Review | Wiggle now affects selected stacks only, draw animation softened, cards fly via shared transitions. | ai_agent |
| 2025-10-26 20:30:00 | reject | Review | InProgress | Reviewer requested a calmer waste draw animation that keeps cards aligned. | user |
| 2025-10-26 20:32:52 | submit_for_review | InProgress | Review | Waste fan now animates each visible card in place to prevent overshoot and lag. | ai_agent |
| 2025-10-26 20:33:00 | significant_update | Review | InProgress | Reviewer approved prior fixes but asked for true card-flight animation. | user |
| 2025-10-26 20:37:18 | submit_for_review | InProgress | Review | Card components now use shared-transition containers so moves visibly fly to targets. | ai_agent |

## Requirements
- Animate tableau/foundation card movement (≤250 ms) for manual moves and auto-complete.
- Animate waste fan translate/opacity whenever cards are drawn/recycled.
- Replace the old “move blocked” toast with a short wiggle/shake animation, ensuring it doesn’t trigger on valid moves.
- Keep animations lightweight so they run on native and web.

## Implementation Plan
1. Create reusable animation hooks/utilities (e.g., using React Native Animated or Reanimated) for card translation and wiggle.
2. Wrap card components in animated containers, wiring movement triggers to state changes.
3. Animate the waste fan container when the waste array changes.
4. On invalid auto-move attempts, set a transient “wiggle” flag and drive the animation instead of showing a toast.
5. Test on web + simulator to ensure 60fps feel.

## Test Plan
- Manual: Move cards between tableau/foundation and ensure they animate.
- Manual: Draw cards to confirm the waste fan slides.
- Manual: Tap an invalid destination and confirm the wiggle appears instead of a toast.
- `yarn tsc --noEmit`
- `npx expo export --platform web --output-dir dist-web`

## Verification
- Manual: Pending user validation of the per-card waste fan slide (no overshoot) and the new card-flight shared transitions (CLI cannot display them).
- `yarn tsc --noEmit`
- `npx expo export --platform web --output-dir dist-web`

## Files Modified
- `app/(tabs)/index.tsx`
