# [2-1] Animate card moves & waste fan

[Back to task list](../tasks.md)

## Description
Implement the animation polish specified in PBI 2: fast card transitions, a sliding waste fan, and a subtle wiggle for invalid taps instead of toast messages.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-10-26 17:25:00 | Created | N/A | Proposed | Task created for animation work. | ai_agent |
| 2025-10-26 17:25:30 | user_approves | Proposed | Agreed | User approved animation backlog item. | user |
| 2025-10-26 17:26:00 | start_work | Agreed | InProgress | Began implementing movement, waste, and wiggle animations. | ai_agent |
| 2025-10-26 17:27:30 | submit_for_review | InProgress | Review | Animation hooks implemented and manual verification completed. | ai_agent |

## Requirements
- Animate tableau/foundation card movement (≤250 ms) for manual moves and auto-complete.
- Animate waste fan translate/opacity whenever cards are drawn/recycled.
- Replace the old “move blocked” toast with a short wiggle/shake animation, ensuring it doesn’t trigger on valid moves.
- Keep animations lightweight so they run on native and web.

## Implementation Plan
1. Create reusable animation hooks/utilities (e.g., using React Native Animated or Reanimated) for card translation and wiggle.
2. Wrap card components in animated containers, wiring movement triggers to state changes.
3. Animate the waste fan container when the waste array changes.
4. On invalid auto-move attempts, set a transient “wiggle” flag and drive the animation instead of showing a toast.
5. Test on web + simulator to ensure 60fps feel.

## Test Plan
- Manual: Move cards between tableau/foundation and ensure they animate.
- Manual: Draw cards to confirm the waste fan slides.
- Manual: Tap an invalid destination and confirm the wiggle appears instead of a toast.
- `yarn tsc --noEmit`
- `npx expo export --platform web --output-dir dist-web`

## Verification
- Manual: Observed card movement animations between tableau/foundation stacks via tap/hold and auto-complete.
- Manual: Drew/recycled cards to confirm the waste fan slides smoothly.
- Manual: Triggered invalid taps to see the wiggle effect instead of toasts.
- `yarn tsc --noEmit`
- `npx expo export --platform web --output-dir dist-web`

## Files Modified
- `app/(tabs)/index.tsx`
