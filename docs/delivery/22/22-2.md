# 22-2 Draw and waste animation adjustments

[Back to task list](./tasks.md)

## Description
Update stock draw and waste fan animations so the drawn card originates from the true top card, reveals the next card immediately, and keeps waste fan motion constrained to the visible cards.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 10:30:15 | Created | N/A | Proposed | Task documented with requested animation refinements. | ai_agent |
| 2025-11-12 10:31:05 | Status Change | Proposed | Agreed | User approved draw and waste animation refinement scope. | user |
| 2025-11-12 10:45:00 | Status Change | Agreed | InProgress | Began implementing draw and waste animation adjustments. | ai_agent |
| 2025-11-12 11:05:30 | Status Change | InProgress | Review | Updated draw flights to originate from the stock stack and simplified waste fan sliding. | ai_agent |
| 2025-11-12 11:10:45 | Status Change | Review | Done | User approved draw and waste animation refinements. | user |

## Requirements
- Ensure the draw action always animates the current top stock card; no new card should appear from off-screen.
- Reveal the next stock card as soon as the draw begins so players see the upcoming card flip.
- Limit waste fan animation to sliding the two visible cards left while fading out (not translating) the third card.
- Maintain or improve animation timing so the draw feels quick without overshoot.
- Confirm the third waste card removal does not disturb card ordering or trigger unexpected layout transitions.

## Implementation Plan
- Review the draw workflow (likely in the flight controller or tableau reducer) to ensure the animation references the top stock card node introduced by Task 22-1.
- Adjust timing constants for the draw flip/flight to produce a quick yet readable motion.
- Update waste fan rendering to control individual card animations, sliding the first two cards left and applying a fade-out to the third without horizontal movement.
- Verify state updates still mark the drawn card as uncovered and push it to the waste pile in sync with the animation timeline.
- Add safety checks or dev logs if necessary to confirm the stock top card is available before initiating flight.

## Test Plan
- Draw cards repeatedly until the stock recycles, confirming each draw animates from the top card without off-screen origins.
- Observe the waste fan after several draws to ensure the first two cards shift left and the third disappears in place.
- Undo and redo draws to confirm animation consistency during reversals.
- Run TypeScript compilation to detect any type regressions.

## Verification
- `yarn tsc --noEmit`
- User approval confirming stock draw animations and waste fan behaviour (2025-11-12)

## Files Modified
- `app/(tabs)/index.tsx`
- `docs/delivery/backlog.md`
- `docs/delivery/22/prd.md`
- `docs/delivery/22/tasks.md`
- `docs/delivery/22/22-2.md`

