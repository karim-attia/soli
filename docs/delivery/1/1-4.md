# [1-4] E2E CoS Test Plan + execution

[Back to task list](../tasks.md)

## Description
Draft and eventually run a consolidated end-to-end test plan that exercises every acceptance criterion for PBI 1 across a real device/simulator build.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-10-26 13:17:30 | Created | N/A | Proposed | Added placeholder for holistic testing. | ai_agent |
| 2025-11-01 11:26:00 | Status Change | Proposed | InProgress | Authored detailed end-to-end CoS test plan covering all acceptance criteria. | ai_agent |
| 2025-11-01 11:40:00 | Status Change | InProgress | Review | Plan finalized; ready for execution post-implementation verification. | ai_agent |

## Requirements
- Document manual/automated steps validating each CoS bullet from the PRD.
- Specify tooling (Expo Go, simulators) plus datasets or seed requirements.
- Track pass/fail results and follow-up issues discovered.

## Implementation Plan
1. Enumerate CoS items and map them to concrete, repeatable test steps.
2. Describe environment setup (commands, expected output) and any fixtures.
3. Record actual execution results and attach evidence/screenshots (future work).

## Test Plan
The following scenarios map one-to-one with the acceptance criteria in `docs/delivery/1/prd.md`. Execute on iOS Simulator (primary), Android emulator, and web (Chrome) to ensure parity.

1. **Documentation integrity (CoS 1)**
   - Open backlog, PRD, and task docs in repo.
   - Verify status tables synchronized (no missing task files; histories up to date).
   - Expected: No mismatches or missing sections.
   - Status: âœ… Verified during plan authoring.
2. **Initial board render & move legality (CoS 2)**
   - Launch app via `npx expo start --web` (or Expo Go).
   - Confirm stock, waste, tableau, foundations render with correct face-up/down configuration.
   - Attempt illegal move (e.g., red 7 onto red 6); expect rejection with existing feedback.
   - Status: ğŸ”„ To run post-build smoke.
3. **Layout & controls placement (CoS 3)**
   - Resize browser width and load on iPhone 15 simulator.
   - Verify tableau columns flex to full width without horizontal scroll, symmetric margins, header contains New Game.
   - Status: ğŸ”„ To run.
4. **Card visual styling (CoS 4)**
   - Inspect card corners, rank/suit placement, centered suit icon; compare against design reference (`docs/visual/card-reference.png` if present).
   - Status: ğŸ”„ To run.
5. **Tap / long-press interactions (CoS 5)**
   - Tap a movable tableau card; confirm auto-move to legal destination.
   - Long-press to enter manual mode; drag to target column; ensure invalid targets return card.
   - Tap/hold foundation card; ensure it returns to tableau when legal.
   - Status: ğŸ”„ To run.
6. **Draw-1 cycling, move counter, recycle icon (CoS 6)**
   - Draw through entire stock verifying draw button disabled/enabled appropriately.
   - Observe move counter increment on draw/move/undo.
   - Confirm recycle icon appears on empty stock.
   - Status: ğŸ”„ To run.
7. **Auto-complete flow (CoS 7)**
   - Progress game to state with no face-down cards (use debug shuffle if needed).
   - Trigger auto-complete; measure cadence (~5 cards/sec), ensure stock recycled automatically and ğŸ‰ toast displayed.
   - Status: ğŸ”„ To run.
8. **New game confirmation (CoS 8)**
   - Tap New Game while in-progress; ensure confirmation modal appears with cancel option.
   - Status: ğŸ”„ To run.
9. **Build health (CoS 9)**
   - Run `yarn tsc --noEmit` and `yarn test --watch=false`.
   - Expected: Both commands exit 0.
   - Status: âš ï¸ `yarn tsc --noEmit` passes; `yarn test --watch=false` currently fails (`jest` binary missing). Logged in Verification.
10. **Task index references (CoS 10)**
    - Confirm `docs/delivery/1/tasks.md` includes `1-4` entry linking back here.
    - Status: âœ… Verified during plan authoring.

## Verification
- `yarn tsc --noEmit` (2025-11-01) â€” âœ… success.
- `yarn test --watch=false` (2025-11-01) â€” âŒ fails (`command not found: jest`); follow-up needed once Jest dependency is added.
- Cross-checked documentation references (backlog, PRD, tasks) with current repository state.

## Files Modified
- This documentation file only.
