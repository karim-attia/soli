# [12-2] Capture solution telemetry

[Back to task list](../tasks.md)

## Description
Record shuffle identifiers and the sequence of moves executed when a solvable game is solved, preparing payloads for sharing.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-01 09:55:00 | Created | N/A | Proposed | Task created to capture move telemetry for solvable wins. | ai_agent |

## Requirements
- Track player actions (move source/target, timestamps) for solvable games.
- Store telemetry temporarily until upload completes, then clear or mark as sent.
- Ensure data collection has minimal performance impact.

## Implementation Plan
1. Hook into move reducer to log actions when solvable mode is active and sharing is enabled.
2. Accumulate telemetry in memory with safe bounds to avoid leaks.
3. Serialize telemetry into a format suitable for backend submission (JSON).
4. Provide utilities to reset telemetry on new game or when sharing is disabled.
5. Write tests verifying move capture accuracy.

## Test Plan
- Manual: Play a solvable game with sharing enabled and inspect telemetry output via debugging tools.
- `yarn test --watch=false` for telemetry utilities.
- `yarn tsc --noEmit`.

## Verification
- Manual verification of captured move sequences.
- `yarn test --watch=false`.
- `yarn tsc --noEmit`.

## Files Modified
- `src/solitaire/klondike.ts`
- `src/state/history.ts`
- `src/state/settings.ts`

