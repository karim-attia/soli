# [6-2] Lock gameplay during celebrations

[Back to task list](../tasks.md)

## Description
Prevent further interactions with the board once the final card reaches a foundation and celebrations begin, re-enabling input only after the sequence completes.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-01 09:29:00 | Created | N/A | Proposed | Task added to disable gameplay during win celebrations. | ai_agent |
| 2025-11-01 10:07:00 | user_approves | Proposed | Agreed | User approved locking gameplay during celebrations. | user |
| 2025-11-01 10:08:00 | start_work | Agreed | InProgress | Began implementing gameplay lock toggled by celebration state. | ai_agent |
| 2025-11-01 10:46:00 | submit_for_review | InProgress | Review | Gameplay locks during celebration and unlocks after new game confirmation. | ai_agent |

## Requirements
- Detect the transition into the win state and prevent further user moves.
- Allow undo/new game actions only after celebrations finish or if interrupted (if allowed).
- Ensure auto-play cannot restart once the celebratory lock is active.

## Implementation Plan
1. Track a UI-level locked state when celebrations begin.
2. Guard move/draw handlers and disable interactive components whenever the board is locked.
3. Automatically clear the locked state when the celebration-driven new game prompt resets play.
4. Prevent manual triggers (undo/draw/autoplay) from firing while locked.
5. Verify normal play remains unchanged prior to the win trigger.

## Test Plan
- Manual: Complete a game and attempt to interact with tableau/waste during celebration; interactions should be disabled.
- Manual: After celebration ends, confirm interactions resume once a new game is started.
- `yarn test --watch=false` (add coverage for locked-state guards).
- `yarn tsc --noEmit`.

## Verification
- Manual verification across platforms confirming inputs are blocked during celebration.
- `yarn tsc --noEmit`.

## Files Modified
- `app/(tabs)/index.tsx`

