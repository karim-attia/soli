[Back to task list](./tasks.md)

# 26-1 Layering research and automation plan

## Description
Perform the required deep-dive into React Native and Tamagui layering to resolve card flight animations being obscured by other UI. Produce a comprehensive markdown analysis, enumerate each flight combination, recommend implementation strategies (including whether to use portals), and outline how to automate verification for every variant.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-23 09:05:00 | Created | N/A | Proposed | Task drafted with research scope covering layering and automation planning. | ai_agent |
| 2025-11-23 09:06:00 | Status Change | Proposed | InProgress | Began research task per user request. | ai_agent |
| 2025-11-23 11:12:00 | Status Change | InProgress | Review | Drafted layering research doc and automation plan; ready for stakeholder review. | ai_agent |
| 2025-11-23 14:56:21 | Status Change | Review | InProgress | Reopened to deepen approach comparison and cloning/maintainability analysis. | ai_agent |
| 2025-11-23 14:57:41 | Status Change | InProgress | Review | Added overlay vs shared-parent comparison plus cloning and maintainability considerations. | ai_agent |

## Requirements
- Capture extensive external research on React Native/Tamagui layering, z-index stacking contexts, and portal strategies with citations.
- Document every card flight combination relevant to Klondike (stock→waste, waste→tableau, tableau→tableau, tableau→foundation, foundation→tableau, stock→foundation) and note current code paths.
- Evaluate options (e.g., dedicated overlay root, portals, elevation) and recommend an approach tailored to the project.
- Outline an automation/validation strategy that can exercise each flight combination reliably.
- Store the findings in `docs/delivery/26/animation-layering-research.md` and link to any supporting logs if used.

## Implementation Plan
1. Review existing animation orchestration code to understand current layering and constraints.
2. Conduct web research on React Native z-index, Tamagui portals, and cross-component animation layering best practices.
3. Summarize findings, pros/cons, and recommended approach in the research markdown file, including references.
4. Enumerate all flight combinations with notes on how they manifest in gameplay and current issues.
5. Design an automation/validation strategy covering each combination (unit/integration/E2E or instrumentation) and document it clearly.

## Test Plan
- Confirm `docs/delivery/26/animation-layering-research.md` exists, is comprehensive, and references external sources.
- Ensure the document enumerates every specified flight combination and automation strategy steps.
- Verify recommendations align with code inspection observations.

## Verification
- Manual review of the research document to ensure completeness and alignment with requirements.
- Cross-check that proposed automation hooks are feasible within existing tooling.

## Files Modified
- `docs/delivery/26/26-1.md`
- `docs/delivery/26/animation-layering-research.md` (new)
