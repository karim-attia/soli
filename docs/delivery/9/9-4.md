# [9-4] Support dark mode on/off/auto

[Back to task list](../tasks.md)

## Description
Allow players to choose between light, dark, or automatic theme selection and propagate the choice through Tamagui’s theming system.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-01 09:43:00 | Created | N/A | Proposed | Task created to implement dark mode controls. | ai_agent |
| 2025-11-01 10:00:55 | user_approves | Proposed | Agreed | User approved dark mode task. | user |

## Requirements
- Provide segmented control or dropdown allowing on/off/auto selection.
- When set to auto, follow system preference with listeners for runtime changes.
- Update Tamagui theme provider and any custom colors to respect selection.

## Implementation Plan
1. Extend settings schema with a `themeMode` enum.
2. Use Tamagui’s `useTheme`/`Theme` components (or `ThemeProvider`) to switch modes.
3. Implement system preference detection via `useColorScheme` or Expo Appearance API.
4. Ensure the gameplay surface (including green background from PBI 7) adapts for dark mode.
5. Add tests verifying theme mode logic and persistence integration.

## Test Plan
- Manual: Toggle between light/dark/auto and ensure UI updates immediately.
- Manual: Change system theme while app is open in auto mode to confirm updates.
- `yarn test --watch=false` for theme reducer logic.
- `yarn tsc --noEmit`.

## Verification
- Manual cross-platform validation of theme switching behavior.
- `yarn test --watch=false`.
- `yarn tsc --noEmit`.

## Files Modified
- `app/(tabs)/index.tsx`
- `app/settings.tsx`
- `src/theme/index.ts`

