# 17-3 Hide undo button for fresh games

[Back to task list](./tasks.md)

## Description
Difficulty: Easy. Only surface the undo button after the player has performed the first reversible action in the current game.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-04 10:22:00 | Created | N/A | Proposed | Task file created with initial scope. | ai_agent |
| 2025-11-04 10:22:10 | Status Change | Proposed | Agreed | User requested the task and confirmed it should be implemented. | user |
| 2025-11-04 10:22:20 | Status Change | Agreed | InProgress | Began implementation work on hiding undo for fresh games. | ai_agent |
| 2025-11-04 10:45:00 | Status Change | InProgress | Review | Implementation complete; ready for verification feedback. | ai_agent |

## Requirements
- Detect when the current game has zero undoable moves.
- Hide the undo button in that state; reveal it immediately after the first move that can be undone.
- Ensure hiding the button does not break layout consistency.
- Suppress the undo button whenever a win celebration is active or the game has already been won.

## Implementation Plan
- Locate the component rendering the undo control (likely within the Klondike header or controls layout).
- Leverage existing history/undo state selectors to determine whether the undo stack is empty.
- Condition the undo button rendering (or enabled state) based on the selector; ensure accessibility labels remain correct.
- Validate that the button reappears after making a move and hides again after starting a new game.

## Test Plan
- Launch a fresh game and confirm the undo button is absent.
- Perform a move; verify the undo button appears and works.
- Start a new game; ensure the button is hidden until another move occurs.

## Verification
- Pending simulator run to confirm undo visibility toggles as expected, including win celebrations.

## Files Modified
- app/(tabs)/index.tsx

