# 17-8 Add prod install mode to demo script

[Back to task list](./tasks.md)

## Description
Difficulty: Medium. Introduce a production install mode to `run-demo-autosolve.js` that installs the release build and streams logs without triggering the demo auto-solve sequence.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-07 10:32:00 | Created | N/A | Proposed | Task defined to add production install mode to demo automation tooling. | ai_agent |
| 2025-11-07 10:34:00 | Status Change | Proposed | InProgress | Began implementation of new prod mode and supporting scripts. | ai_agent |
| 2025-11-07 11:05:00 | Status Change | InProgress | Review | Implementation complete; awaiting validation. | ai_agent |
| 2025-11-07 11:22:00 | Status Change | Review | InProgress | Addressing release build failure due to duplicate Android package classes. | ai_agent |
| 2025-11-07 11:45:00 | Status Change | InProgress | Review | Removed legacy `com.soli.klondike` sources and reran prod install successfully. | ai_agent |
| 2025-11-07 12:05:00 | Status Change | Review | InProgress | Investigating progress bar regression and prod log filtering per user request. | ai_agent |
| 2025-11-07 12:32:00 | Status Change | InProgress | Review | Restored single-line progress output and matched prod log filtering; ready for validation. | ai_agent |

## Requirements
- Add a new mode to `scripts/run-demo-autosolve.js` that installs the release build without starting the demo auto-solve.
- Ensure the progress bar stops updating once installation finishes, matching the existing demo mode behaviour.
- Emit a success message after installation completes for both demo and prod modes.
- Keep the terminal session open with log output in prod mode while demo mode retains the existing auto-exit behaviour.
- Provide a Yarn script named `prod` that launches the new mode.

## Implementation Plan
- Update `scripts/run-demo-autosolve.js` to parse a `prod` mode argument and branch into mode-specific flows.
- Share the install logic between both modes, logging success and freezing the progress bar after completion.
- For prod mode, spawn `adb logcat`, stream its output, and keep the process running until interrupted.
- For demo mode, retain the existing auto-solve monitoring flow, ensuring install success messaging is emitted.
- Update `package.json` scripts so `yarn prod` runs the new mode, and ensure the task documentation stays in sync.

## Test Plan
- Run `yarn demo:auto-solve` and verify the demo auto-solve still completes and the script exits after logging success.
- Run `yarn prod`, confirm the release build installs, the progress bar completes once, a success message is logged, and logcat output continues streaming until manual exit.
- Confirm logcat streaming in prod mode preserves install success messaging and that ctrl+c stops the process cleanly.

## Verification
- Pending manual verification via the test plan.

## Files Modified
- package.json
- scripts/run-demo-autosolve.js
- docs/delivery/17/tasks.md
- docs/delivery/17/17-8.md

