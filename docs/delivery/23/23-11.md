# 23-11 Extract layout and stats helpers

[Back to task list](../tasks.md)

## Description
Move shared layout computations (e.g., card metrics and statistics rows) out of the Klondike screen into focused helpers to keep the component slim.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 19:32:00 | Created | N/A | Proposed | Task filed to capture layout/statistics extraction. | ai_agent |
| 2025-11-12 19:34:00 | Status Change | Proposed | InProgress | Begin extracting card metric + statistics helpers. | ai_agent |
| 2025-11-12 19:41:00 | Status Change | InProgress | Review | Helper extraction complete and type-check verified. | ai_agent |

## Requirements
- Extract `computeCardMetrics` into a reusable helper within the klondike feature namespace.
- Move statistics row derivation (including `statsVisible` logic) into the statistics component or adjacent helper.
- Ensure imports and call sites reference the new helpers.
- Keep TypeScript green after refactor.

## Implementation Plan
1. Create helper module(s) for card metrics and statistics derivation.
2. Update `app/(tabs)/index.tsx` to consume the new helpers.
3. Adjust component exports/imports (`StatisticsHud`) as needed.
4. Run type checks.

## Implementation Notes
- Moved `computeCardMetrics` into `src/features/klondike/utils/cardMetrics.ts` and updated the screen to import it.
- Added `buildStatisticsRows` helper alongside `StatisticsHud` so the screen now simply consumes formatted rows.
- Simplified header rendering to rely on `statisticsRows.length` rather than a separate visibility flag.

## Test Plan
- `yarn tsc --noEmit`

## Verification
- TypeScript build passes.
- `app/(tabs)/index.tsx` no longer declares card metric/statistics helper logic inline.

## Files Modified
- `app/(tabs)/index.tsx`
- `src/features/klondike/utils/cardMetrics.ts`
- `src/features/klondike/components/StatisticsHud.tsx`
