# 23-9 Polish residual utilities

[Back to task list](../tasks.md)

## Description
Tidy the remaining helper logic in the Klondike screen by pruning unused selectors, relocating the celebration debug badge, and simplifying demo/animation helpers for readability.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 18:05:00 | Created | N/A | Proposed | Task captured to track final readability cleanups. | ai_agent |
| 2025-11-12 18:45:00 | Status Change | Proposed | InProgress | Begin residual cleanup of helpers and debug UI. | ai_agent |
| 2025-11-12 19:05:00 | Status Change | InProgress | Review | Completed helper pruning and debug UI extraction. | ai_agent |

## Requirements
- Evaluate whether `describeSelection` is still needed; remove or relocate it if appropriate.
- Move the celebration debug badge out of `app/(tabs)/index.tsx` to reduce component length.
- Review `handleLaunchDemoGame`, `dispatchWithFlight`, `runDemoSequence`, and similar helpers, extracting or deleting code that is obsolete.
- Remove logging or functions such as `registerFoundationArrival` if they no longer provide value.

## Implementation Plan
1. Audit helper usage within the Klondike screen and identify safe removals or relocations.
2. Extract remaining UI helpers into dedicated modules/components where beneficial.
3. Update references, ensuring imports stay minimal and comments remain accurate.
4. Run linting/type checks to confirm no dead references remain.

## Implementation Notes
- Removed the unused foundation-arrival logger and stopped wiring that callback through `TopRow` / `FoundationPile` props.
- Extracted the celebration debug badge and selection hint into dedicated components under `src/features/klondike/components`.
- Introduced `useDemoGameLauncher` to encapsulate demo launch orchestration and trimmed the corresponding logic from `app/(tabs)/index.tsx`.
- Updated both the main Klondike screen and the solver lab screen to reuse the shared selection hint component.

## Test Plan
- `yarn tsc --noEmit`
- Manual: celebration badge visibility and demo launch smoke test _(pending)_.

## Verification
- Klondike screen is shorter and delegates demo orchestration and debug UI to feature modules.
- TypeScript build passes after the cleanup.

## Files Modified
- `app/(tabs)/index.tsx`
- `app/(tabs)/two.tsx`
- `src/features/klondike/components/CelebrationDebugBadge.tsx`
- `src/features/klondike/components/SelectionHint.tsx`
- `src/features/klondike/hooks/useDemoGameLauncher.ts`