# 23-16 Move game result recording helper

[Back to task list](../tasks.md)

## Description
Relocate the logic that records completed games from `app/(tabs)/index.tsx` into the history module so result bookkeeping lives alongside the history context.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 20:12:00 | Created | N/A | Proposed | Task opened to track relocating the record-game helper. | ai_agent |
| 2025-11-12 20:13:00 | Status Change | Proposed | InProgress | Started extracting record-game logic into history utilities. | ai_agent |
| 2025-11-12 20:25:00 | Status Change | InProgress | Review | Helper exported and screen updated. | ai_agent |

## Requirements
- Add an exported helper in `src/state/history.tsx` that encapsulates the record logic previously in the screen.
- Update `app/(tabs)/index.tsx` to call the helper and drop direct duplication.
- Ensure preview/display name refs are honoured when recording results.
- Keep TypeScript passing after the move.

## Implementation Plan
1. Introduce the helper and supporting types in the history module.
2. Refactor the screen to delegate to the new helper.
3. Remove redundant imports and code paths in the screen.
4. Run TypeScript checks.

## Implementation Notes
- Introduced `recordGameResultFromState` (with options typing) inside `src/state/history.tsx`.
- Updated the screen to delegate result recording to the helper and trimmed redundant logic.

## Test Plan
- `yarn tsc --noEmit`

## Verification
- `recordCurrentGameResult` now wraps the shared helper and TypeScript passes.

## Files Modified
- `app/(tabs)/index.tsx`
- `src/state/history.tsx`
