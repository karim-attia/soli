# 23-20 Implement container/view split

[Back to task list](../tasks.md)

## Description
Implement the planned split by introducing `useKlondikeGame`, adding a `KlondikeGameView` presentational component, and slimming `app/(tabs)/index.tsx` down to navigation concerns.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 20:34:00 | Created | N/A | Proposed | Task opened to implement the view/container split. | ai_agent |
| 2025-11-12 20:35:00 | Status Change | Proposed | InProgress | Started extracting logic into the new hook and component. | ai_agent |
| 2025-11-12 21:05:00 | Status Change | InProgress | Review | Hook + view implemented and screen slimmed. | ai_agent |

## Requirements
- Create `useKlondikeGame` that encapsulates the existing reducer, hooks, and side effects, returning navigation callbacks plus a view-model.
- Build `KlondikeGameView` that renders the board using purely presentational props.
- Update `app/(tabs)/index.tsx` to use the hook/component and remove game logic.
- Maintain the existing helper comments and ensure `collectSelectionCardIds` explanations persist.

## Implementation Plan
1. Move the current TabOneScreen logic into `useKlondikeGame`, returning `{ developerModeEnabled, requestNewGame, handleLaunchDemoGame, viewProps }`.
2. Create `KlondikeGameView` that renders the UI using props.
3. Slim `app/(tabs)/index.tsx` to navigation + `<KlondikeGameView {...viewProps} />`.
4. Update docs/tasks and run `yarn tsc --noEmit`.

## Implementation Notes
- Added `useKlondikeGame` with the former screen logic and view-model assembly, including the clarified selection/flight helpers.
- Created `KlondikeGameView` to render the board and wired it up inside the slimmed `app/(tabs)/index.tsx`.
- Exported `UndoScrubber` props for reuse and updated statistics/celebration plumbing per the container-view split.

## Test Plan
- `yarn tsc --noEmit`

## Verification
- TypeScript build passes with the new structure.

## Files Modified
- `app/(tabs)/index.tsx`
- `src/features/klondike/components/KlondikeGameView.tsx`
- `src/features/klondike/components/UndoScrubber.tsx`
- `src/features/klondike/hooks/useKlondikeGame.ts`


