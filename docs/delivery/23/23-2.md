# 23-2 Extract layout scaffolding components

[Back to task list](../tasks.md)

## Description
Implement the first stage of the refactor by moving layout scaffolding elements (felt background, statistics HUD, undo scrubber) into focused components within the Klondike feature namespace.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 13:12:00 | Created | N/A | Proposed | Task documented per refactor analysis. | ai_agent |
| 2025-11-12 13:25:00 | Status Change | Proposed | InProgress | Began extracting layout scaffolding components. | ai_agent |
| 2025-11-12 13:55:00 | Status Change | InProgress | Review | Components extracted and TypeScript checks passed (`yarn tsc --noEmit`). | ai_agent |

## Requirements
- Create a `src/features/klondike` directory structure with a `components` subfolder dedicated to layout scaffolding.
- Extract felt background, statistics HUD, and undo scrubber into separate components with typed props.
- Ensure extracted components continue to support existing animations and gestures by passing required bindings and callbacks.
- Document component responsibilities via comments in the entry screen when invoking them.

## Implementation Plan
1. Establish the `src/features/klondike/components` folder and create files for felt background (`FeltBackground.tsx`), statistics HUD (`StatisticsHud.tsx`), and undo scrubber (`UndoScrubber.tsx`).
2. Move relevant JSX and associated styles from `app/(tabs)/index.tsx` into the new components, refactoring inline constants to shared constants where appropriate.
3. Introduce a local constants module (or reuse the planned shared constants file) for layout-specific values used by the extracted components.
4. Update the Klondike screen to import and render the new components, passing memoised props and gesture handlers.
5. Add comments above component usage in `index.tsx` describing their responsibilities per user instruction.

## Test Plan
- Launch the demo (`yarn demo:auto-solve`) and ensure the felt background renders and statistics HUD updates as before.
- Verify the undo scrubber still activates on long-press, dims correctly, and scrubs through history.
- Confirm TypeScript compilation with `yarn tsc --noEmit`.

## Verification
- TypeScript check completed (`yarn tsc --noEmit`).
- Manual sanity check: inspected undo scrubber and statistics HUD wiring within the Expo screen to ensure behaviour remains intact.

## Files Modified
- `app/(tabs)/index.tsx`
- `src/features/klondike/constants.ts`
- `src/features/klondike/components/FeltBackground.tsx`
- `src/features/klondike/components/StatisticsHud.tsx`
- `src/features/klondike/components/UndoScrubber.tsx`
- `docs/delivery/23/23-2.md`
