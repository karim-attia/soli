# 23-17 Consolidate statistics view-model

[Back to task list](../tasks.md)

## Description
Push statistics-related derivations (elapsed formatting, row visibility) into the statistics module so the Klondike screen consumes ready-to-render data.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 20:12:00 | Created | N/A | Proposed | Task added to finish extracting statistics logic. | ai_agent |
| 2025-11-12 20:13:00 | Status Change | Proposed | InProgress | Started moving elapsed-time formatting and row derivation. | ai_agent |
| 2025-11-12 20:25:00 | Status Change | InProgress | Review | Statistics helper expanded and screen simplified. | ai_agent |

## Requirements
- Update `StatisticsHud` (or a sibling helper) to compute move/time rows directly from `GameState`.
- Remove redundant elapsed formatting logic from `app/(tabs)/index.tsx`.
- Ensure the screen just consumes the helper output to render statistics.
- Keep TypeScript green after the refactor.

## Implementation Plan
1. Expand the statistics helper to accept the game state and settings flags.
2. Refactor the screen to use the new helper and drop local formatting code.
3. Clean up unused imports and intermediates.
4. Run TypeScript checks.

## Implementation Notes
- Reworked `buildStatisticsRowsForState` to accept the entire game state and handle elapsed formatting internally.
- Simplified the screen to consume the helper and removed local formatting state.

## Test Plan
- `yarn tsc --noEmit`

## Verification
- Statistics view-model computation lives in the helper module and TypeScript passes.

## Files Modified
- `app/(tabs)/index.tsx`
- `src/features/klondike/components/StatisticsHud.tsx`
