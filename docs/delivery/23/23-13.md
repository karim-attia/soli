# 23-13 Assess further screen decoupling

[Back to task list](../tasks.md)

## Description
Review the newly modularised Klondike screen for additional extraction candidates and outline a strategy for deeper UI / game-logic separation.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-12 19:56:00 | Created | N/A | Proposed | Task opened to capture further refactor analysis. | ai_agent |
| 2025-11-12 19:57:00 | Status Change | Proposed | InProgress | Started documenting follow-on extraction opportunities. | ai_agent |
| 2025-11-12 20:00:00 | Status Change | InProgress | Review | Analysis drafted. | ai_agent |

## Analysis Summary
- **Auto-complete orchestration**: The auto-queue timer effect and helper hooks could move into a dedicated `useAutoCompleteRunner` hook, leaving the screen to simply observe state flags.
- **Deep link + demo plumbing**: The demo-launch logic now lives in `useDemoGameLauncher`, but the deep-link `useEffect` can join that hook (or a sibling `useKlondikeDemoLinks`) to keep all demo concerns together.
- **Settings/statistics wiring**: After extracting row derivation, the remaining `showMoves`/`showTime` handling could move into a tiny hook (`useStatisticsRows`) returning both rows and header padding flags, trimming header-specific code from the screen.
- **UI vs game state**: A more ambitious split would render the board via a pure presentational component receiving props (`cardMetrics`, `dropHints`, callbacks) while a container hook (`useKlondikeGame`) owns reducer state, persistence, history recording, and demo orchestration. This would enable React Native + web shareability and headless testing. The container would expose:
  - current `GameState`
  - memoised callbacks (`onDraw`, `onUndo`, `onAutoMove`, etc.)
  - view-model data (`statisticsRows`, `cardMetrics`, `celebrationBindings`)
  - derived flags (`boardLocked`, `shouldShowUndo`)
  Implementation would involve lifting most `useEffect`/`useMemo` blocks into the hook and exporting a lightweight component focussed on layout composition.
- **Remaining extraction candidates**: The settings-driven badge header and undo scrubber handshake could each live in their own hook modules, mirroring the pattern used for timers and celebrations.

## Outcome
- Documented concrete extraction opportunities and an outline for fully decoupling UI from state orchestration.

## Files Modified
- _Documentation only_
