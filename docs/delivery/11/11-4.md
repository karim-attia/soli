# [11-4] Mark history entries as solvable

[Back to task list](../tasks.md)

## Description
Ensure history records indicate whether a game originated from the solvable dataset so UI badges and analytics can reference the data.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-01 09:52:00 | Created | N/A | Proposed | Task created to flag history entries as solvable. | ai_agent |
| 2025-11-01 10:01:40 | user_approves | Proposed | Agreed | User approved history solvable flag task. | user |

## Requirements
- Append a boolean `solvable` flag (or similar) to history entries sourced from the solvable dataset.
- Persist flag for both solved and unsolved outcomes.
- Ensure PBI 10â€™s badges/aggregates receive the flag via the history API.

## Implementation Plan
1. Update history schema to include `solvable` metadata.
2. When generating games in solvable mode, pass the flag through completion recording logic.
3. Migrate existing history entries gracefully (default to false if field absent).
4. Update tests validating history serialization.

## Test Plan
- Manual: Play games in solvable and non-solvable modes, verify flag presence via debugging tools.
- `yarn test --watch=false` for history persistence tests.
- `yarn tsc --noEmit`.

## Verification
- Manual confirmation of history entries with correct flag.
- `yarn test --watch=false`.
- `yarn tsc --noEmit`.

## Files Modified
- `src/state/history.ts`
- `app/history.tsx`

