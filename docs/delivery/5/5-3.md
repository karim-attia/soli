# [5-3] Eliminate foundation wiggle during auto-play

[Back to task list](../tasks.md)

## Description
Suppress invalid-move wiggle feedback while auto-play interacts with foundation piles already holding the correct cards.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-01 09:26:00 | Created | N/A | Proposed | Task added to stop foundation wiggles during auto-foundation. | ai_agent |
| 2025-11-01 10:36:00 | user_approves | Proposed | Agreed | User okayed suppression of auto-play foundation wiggle feedback. | user |
| 2025-11-01 10:37:00 | start_work | Agreed | InProgress | Began differentiating auto-play tap feedback from manual invalid moves. | ai_agent |
| 2025-11-01 10:45:00 | submit_for_review | InProgress | Review | Skipped invalid-move wiggle while auto-play runs; TypeScript suite clean. | ai_agent |
| 2025-11-02 12:25:00 | approve | Review | Done | User approved foundation wiggle elimination during auto-play after manual confirmation. | user |

## Requirements
- Detect auto-play interactions that touch foundations but should not trigger invalid feedback.
- Prevent wiggle animations without muting legitimate invalid move feedback from users.
- Maintain consistent audio/visual feedback for manual invalid moves.

## Implementation Plan
1. Trace where the invalid wiggle is currently triggered during foundation taps.
2. Introduce context flags or action metadata distinguishing auto-play from user gestures.
3. Skip wiggle animation dispatch when the action originates from auto-play.
4. Add regression tests ensuring manual invalid moves still wiggle.
5. Validate across platforms that foundations remain visually stable during auto-complete.

## Test Plan
- Manual: Observe foundation piles during auto-complete to confirm no wiggle occurs.
- Manual: Tap a completed foundation manually to ensure wiggle feedback still appears for invalid user input.
- `yarn test --watch=false` (add regression coverage if possible).
- `yarn tsc --noEmit`.

## Verification
- Pending: manual checks on device/web for both auto and manual interactions.
- âœ… 2025-11-01: `yarn tsc --noEmit`.

## Files Modified
- `app/(tabs)/index.tsx`
- `app/(tabs)/two.tsx`

