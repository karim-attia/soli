# [5-3] Eliminate foundation wiggle during auto-play

[Back to task list](../tasks.md)

## Description
Suppress invalid-move wiggle feedback while auto-play interacts with foundation piles already holding the correct cards.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-01 09:26:00 | Created | N/A | Proposed | Task added to stop foundation wiggles during auto-foundation. | ai_agent |
| 2025-11-01 09:59:30 | user_approves | Proposed | Agreed | User approved foundation wiggle suppression task. | user |

## Requirements
- Detect auto-play interactions that touch foundations but should not trigger invalid feedback.
- Prevent wiggle animations without muting legitimate invalid move feedback from users.
- Maintain consistent audio/visual feedback for manual invalid moves.

## Implementation Plan
1. Trace where the invalid wiggle is currently triggered during foundation taps.
2. Introduce context flags or action metadata distinguishing auto-play from user gestures.
3. Skip wiggle animation dispatch when the action originates from auto-play.
4. Add regression tests ensuring manual invalid moves still wiggle.
5. Validate across platforms that foundations remain visually stable during auto-complete.

## Test Plan
- Manual: Observe foundation piles during auto-complete to confirm no wiggle occurs.
- Manual: Tap a completed foundation manually to ensure wiggle feedback still appears for invalid user input.
- `yarn test --watch=false` (add regression coverage if possible).
- `yarn tsc --noEmit`.

## Verification
- Manual checks on device/web for both auto and manual interactions.
- `yarn tsc --noEmit`.

## Files Modified
- `app/(tabs)/index.tsx`
- `src/solitaire/klondike.ts`

