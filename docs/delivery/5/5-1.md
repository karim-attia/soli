# [5-1] Animate auto-foundation card flights

[Back to task list](../tasks.md)

## Description
Wire auto-complete moves into the shared card flight animation system so automated plays mirror manual motion paths.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
| :-- | :-- | :-- | :-- | :-- | :-- |
| 2025-11-01 09:24:00 | Created | N/A | Proposed | Task created to animate auto-foundation moves. | ai_agent |
| 2025-11-01 09:59:20 | user_approves | Proposed | Agreed | User approved auto-foundation animation task. | user |

## Requirements
- Hook auto-foundation execution into the shared animation trigger used for manual moves.
- Maintain sequential animation timing without overlapping cards unexpectedly.
- Preserve undo history entries for auto-generated moves.

## Implementation Plan
1. Inspect auto-foundation queue logic to identify where cards currently teleport to foundations.
2. Refactor the queue executor to call the same `enqueueCardFlight` (or equivalent) used for manual drags.
3. Synchronize delayed animations so the queue waits for flight completion before proceeding.
4. Verify undo/redo interactions still function when animations are in progress.
5. Add unit/integration coverage if available for auto-foundation event sequences.

## Test Plan
- Manual: Trigger auto-complete with multiple tableau cards and confirm each move animates along a visible path.
- Manual: Interrupt auto-complete with undo to ensure states remain consistent.
- `yarn tsc --noEmit`.
- `yarn test --watch=false` (if tests exist for auto-foundation).

## Verification
- Manual confirmation on iOS simulator and web build that auto-foundation moves animate smoothly.
- `yarn tsc --noEmit`.

## Files Modified
- `app/(tabs)/index.tsx`
- `src/solitaire/klondike.ts`

