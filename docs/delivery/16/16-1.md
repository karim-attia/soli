# [16-1] Enable developer mode tools

[Back to task list](../tasks.md)

## Description
Implement the new developer-mode tooling required by PBI 16. This includes adding a persisted developer-mode toggle, hiding solver affordances unless developer mode is enabled, and exposing a hardcoded "Demo Game" launcher in the Klondike header when developer mode is active.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-04 09:06:00 | Created | N/A | Proposed | Drafted task scope for developer mode tooling. | ai_agent |
| 2025-11-04 09:06:30 | Status Change | Proposed | Agreed | User approved developer-mode implementation plan. | user |
| 2025-11-04 09:08:00 | Status Change | Agreed | InProgress | Began implementation of developer mode toggle and tooling. | ai_agent |

## Requirements
- Persist a `developerMode` boolean within the settings store and surface a toggle (gated to internal builds).
- Hide solver navigation items and screens when developer mode is disabled.
- Add a "Demo Game" header control on the Klondike screen that loads a predefined, easily winnable game; surface this control only when developer mode is active.
- Ensure new settings integrate with existing persistence and hydration flows.

## Implementation Plan
1. Extend `SettingsState` with a `developerMode` flag, update persistence/merge logic, and expose a setter via context.
2. Update the settings screen to show the developer-mode toggle only when running an internal (`__DEV__`) build.
3. Convert the tabs drawer layout to be settings-aware and hide the solver screen unless developer mode is enabled; add an in-screen guard on the solver view to redirect if accessed directly while disabled.
4. Introduce a demo-game generator in the Klondike module that returns a deterministic, trivially solvable state and wire a `Demo Game` header button that hydrates this layout when developer mode is active.
5. Ensure UI feedback (toasts, locked board updates, persistence) continues to work with the new entry point.

## Test Plan
- Toggle developer mode on in Settings (available in dev build) and verify it persists across reloads.
- With developer mode off, confirm the drawer no longer lists "Solver Lab" and direct navigation to `/two` redirects back to Klondike.
- With developer mode on, confirm the solver entry reappears and functions normally.
- Trigger the "Demo Game" button and verify a predefined, easy tableau loads with empty stock/waste and allows straight moves to the foundations.
- Confirm standard new-game and persistence flows still operate after using the demo game (start another new game, reload app, etc.).

## Verification
- Manual testing in Expo Go / simulator covering the scenarios listed in the Test Plan.

## Files Modified
- `src/state/settings.tsx`
- `app/settings.tsx`
- `app/(tabs)/_layout.tsx`
- `app/(tabs)/two.tsx`
- `app/(tabs)/index.tsx`
- `src/solitaire/klondike.ts`

