 # [19-2] Implement statistics tracking and HUD
 
 [Back to task list](../tasks.md)
 
 ## Description
 Implement the game-clock logic that starts timing after the first move, expose formatted statistics, and render a top-right HUD that respects the new settings toggles for move count and elapsed time.
 
 ## Status History
 | Timestamp | Event Type | From Status | To Status | Details | User |
 |-----------|------------|-------------|-----------|---------|------|
 | 2025-11-06 13:23:00 | Created | N/A | Proposed | Task drafted to add timer logic and a configurable statistics HUD. | ai_agent |
| 2025-11-06 14:05:00 | Status Change | Proposed | InProgress | Began implementing timer tracking and statistics HUD. | ai_agent |
| 2025-11-07 11:45:00 | Status Change | InProgress | Review | Timer, HUD, and history updates implemented; awaiting review. | ai_agent |
 
 ## Requirements
 - Start the game timer only after the first valid user move (tableau, foundation, waste, etc.) occurs.
 - Pause or stop the timer on win/end states and reset it when a new game starts.
 - Format elapsed time in mm:ss, handling hours gracefully if needed.
 - Render a HUD in the top-right corner that shows move count and/or elapsed time depending on settings flags.
 - Ensure the HUD respects safe-area insets, uses accessible colors, and hides entirely when both toggles are disabled.
 - Provide an API or hook for other systems (analytics, history) to access the timer value if required.
 
 ## Implementation Plan
 1. Extend the game state or controller with timer state, including hooks for start, pause, reset, and elapsed formatting.
 2. Subscribe to move events to trigger the timer start and to game completion events to stop or freeze the timer.
 3. Update the move count logic to respect the settings flag for visibility while continuing to track counts for undo/hints.
 4. Build a reusable HUD component that reads settings flags and displays the live move/time values with Tamagui styling.
 5. Integrate the HUD into the Klondike screen layout, ensuring no overlap with existing controls and supporting orientation changes.
 
 ## Test Plan
 - Unit: Add tests for timer start/reset logic verifying start on first move, pause on completion, and correct formatting.
 - Manual: Start a game, make the first move, ensure the timer begins and increments; undo/reset game and verify timer resets.
 - Manual: Toggle settings to hide moves/time individually and confirm HUD responds immediately.
 - Manual: Complete a game and ensure timer stops while the HUD maintains final values.
 
 ## Verification
- Simulator/device sessions covering new game, mid-game, and win flows with various settings combinations.
- Manual: toggled move/time statistics, confirmed HUD placement/timer behaviour, confirmed history entries capture move/time data.
- Build: `yarn tsc --noEmit`
 
 ## Files Modified
 - `docs/delivery/19/19-2.md`
 

